import os
import random
from telegram import Update
from telegram.ext import Application, CommandHandler, MessageHandler, filters, ContextTypes

# –ó–∞–≥—Ä—É–∑–∫–∞ —Ç–æ–∫–µ–Ω–∞ –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è
TOKEN = os.environ.get("TOKEN")
if not TOKEN:
    raise ValueError("–¢–æ–∫–µ–Ω –Ω–µ –Ω–∞–π–¥–µ–Ω. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è TOKEN.")


# –°–ª–æ–≤–∞—Ä—å —Å–ª–æ–≤ —Å –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏ —É–¥–∞—Ä–µ–Ω–∏–π
words = {
    "–∞—ç—Ä–æ–ø–æ—Ä—Ç—ã": ["–∞—ç—Ä–æ–ø–û—Ä—Ç—ã", "–∞—ç—Ä–æ–ø–æ—Ä—Ç–´"],
    "–±–∞–Ω—Ç—ã": ["–±–ê–Ω—Ç—ã", "–±–∞–Ω—Ç–´"],
    "–±–æ—Ä–æ–¥—É": ["–±–û—Ä–æ–¥—É", "–±–æ—Ä–æ–¥–£"],
    "–≤–µ—Ä–æ–∏—Å–ø–æ–≤–µ–¥–∞–Ω–∏–µ": ["–≤–µ—Ä–æ–∏—Å–ø–æ–≤–ï–¥–∞–Ω–∏–µ", "–≤–µ—Ä–æ–∏—Å–ø–æ–≤–µ–¥–ê–Ω–∏–µ"],
    "–±—É—Ö–≥–∞–ª—Ç–µ—Ä–æ–≤": ["–±—É—Ö–≥–ê–ª—Ç–µ—Ä–æ–≤", "–±—É—Ö–≥–∞–ª—Ç–µ—Ä–û–≤"],
    "–≤–æ–¥–æ–ø—Ä–æ–≤–æ–¥": ["–≤–æ–¥–æ–ø—Ä–æ–≤–û–¥", "–≤–æ–¥–æ–ø—Ä–û–≤–æ–¥"],
    "–≥–∞–∑–æ–ø—Ä–æ–≤–æ–¥": ["–≥–∞–∑–æ–ø—Ä–æ–≤–û–¥", "–≥–∞–∑–æ–ø—Ä–û–≤–æ–¥"],
    "–≥—Ä–∞–∂–¥–∞–Ω—Å—Ç–≤–æ": ["–≥—Ä–∞–∂–¥–ê–Ω—Å—Ç–≤–æ", "–≥—Ä–ê–∂–¥–∞–Ω—Å—Ç–≤–æ"],
    "–¥–µ—Ñ–∏—Å": ["–¥–µ—Ñ–ò—Å", "–¥–ï—Ñ–∏—Å"],
    "–¥–µ—à–µ–≤–∏–∑–Ω–∞": ["–¥–µ—à–µ–≤–ò–∑–Ω–∞", "–¥–µ—à–µ–≤–∏–∑–Ω–ê"],
    "–¥–∏—Å–ø–∞–Ω—Å–µ—Ä": ["–¥–∏—Å–ø–∞–Ω—Å–ï—Ä", "–¥–∏—Å–ø–ê–Ω—Å–µ—Ä"],
    "–¥–æ–≥–æ–≤–æ—Ä–µ–Ω–Ω–æ—Å—Ç—å": ["–¥–æ–≥–æ–≤–æ—Ä–ï–Ω–Ω–æ—Å—Ç—å", "–¥–æ–≥–æ–≤–û—Ä–µ–Ω–Ω–æ—Å—Ç—å"],
    "–¥–æ–∫—É–º–µ–Ω—Ç": ["–¥–æ–∫—É–º–ï–Ω—Ç", "–¥–û–∫—É–º–µ–Ω—Ç"],
    "–¥–æ—Å—É–≥": ["–¥–æ—Å–£–≥", "–¥–û—Å—É–≥"],
    "–µ—Ä–µ—Ç–∏–∫": ["–µ—Ä–µ—Ç–ò–∫", "–ï—Ä–µ—Ç–∏–∫"],
    "–∂–∞–ª—é–∑–∏": ["–∂–∞–ª—é–∑–ò", "–∂–ê–ª—é–∑–∏"],
    "–∑–Ω–∞—á–∏–º–æ—Å—Ç—å": ["–∑–Ω–ê—á–∏–º–æ—Å—Ç—å", "–∑–Ω–∞—á–ò–º–æ—Å—Ç—å"],
    "–∏–∫—Å—ã": ["–ò–∫—Å—ã", "–∏–∫—Å–´"],
    "–∫–∞—Ç–∞–ª–æ–≥": ["–∫–∞—Ç–∞–ª–û–≥", "–∫–ê—Ç–∞–ª–æ–≥"],
    "–∫–≤–∞—Ä—Ç–∞–ª": ["–∫–≤–∞—Ä—Ç–ê–ª", "–∫–≤–ê—Ä—Ç–∞–ª"],
    "–∫–∏–ª–æ–º–µ—Ç—Ä": ["–∫–∏–ª–æ–º–ï—Ç—Ä", "–∫–∏–ª–û–º–µ—Ç—Ä"],
    "–∫–æ–Ω—É—Å–æ–≤": ["–∫–û–Ω—É—Å–æ–≤", "–∫–æ–Ω—É—Å–û–≤"],
    "–∫–æ—Ä—ã—Å—Ç—å": ["–∫–æ—Ä–´—Å—Ç—å", "–∫–û—Ä—ã—Å—Ç—å"],
    "–∫—Ä–∞–Ω—ã": ["–∫—Ä–ê–Ω—ã", "–∫—Ä–∞–Ω–´"],
    "–∫—Ä–µ–º–µ–Ω—å": ["–∫—Ä–µ–º–ï–Ω—å", "–∫—Ä–ï–º–µ–Ω—å"],
    "–ª–µ–∫—Ç–æ—Ä–æ–≤": ["–ª–ï–∫—Ç–æ—Ä–æ–≤", "–ª–µ–∫—Ç–æ—Ä–û–≤"],
    "–ª–æ–∫—Ç—è": ["–ª–û–∫—Ç—è", "–ª–æ–∫—Ç–Ø"],
    "–ª—ã–∂–Ω—è": ["–ª—ã–∂–Ω–Ø", "–ª–´–∂–Ω—è"],
    "–º–µ—Å—Ç–Ω–æ—Å—Ç–µ–π": ["–º–ï—Å—Ç–Ω–æ—Å—Ç–µ–π", "–º–µ—Å—Ç–Ω–æ—Å—Ç–ï–π"],
    "–Ω–∞–º–µ—Ä–µ–Ω–∏–µ": ["–Ω–∞–º–ï—Ä–µ–Ω–∏–µ", "–Ω–∞–º–µ—Ä–ï–Ω–∏–µ"],
    "–Ω–∞—Ä–æ—Å—Ç": ["–Ω–∞—Ä–û—Å—Ç", "–Ω–ê—Ä–æ—Å—Ç"],
    "–Ω–µ–¥—Ä—É–≥": ["–Ω–ï–¥—Ä—É–≥", "–Ω–µ–¥—Ä–£–≥"],
    "–Ω–µ–¥—É–≥": ["–Ω–µ–¥–£–≥", "–Ω–ï–¥—É–≥"],
    "–Ω–µ–∫—Ä–æ–ª–æ–≥": ["–Ω–µ–∫—Ä–æ–ª–û–≥", "–Ω–ï–∫—Ä–æ–ª–æ–≥"],
    "–Ω–µ–Ω–∞–≤–∏—Å—Ç—å": ["–Ω–ï–Ω–∞–≤–∏—Å—Ç—å", "–Ω–µ–Ω–ê–≤–∏—Å—Ç—å"],
    "–Ω–µ—Ñ—Ç–µ–ø—Ä–æ–≤–æ–¥": ["–Ω–µ—Ñ—Ç–µ–ø—Ä–æ–≤–û–¥", "–Ω–µ—Ñ—Ç–µ–ø—Ä–û–≤–æ–¥"],
    "–Ω–æ–≤–æ—Å—Ç–µ–π": ["–Ω–æ–≤–æ—Å—Ç–ï–π", "–Ω–û–≤–æ—Å—Ç–µ–π"],
    "–Ω–æ–≥—Ç—è": ["–Ω–û–≥—Ç—è", "–Ω–æ–≥—Ç–Ø"],
    "–æ—Ç–∑—ã–≤ (–æ –∫–Ω–∏–≥–µ)": ["–û—Ç–∑—ã–≤", "–æ—Ç–∑–´–≤"],
    "–æ—Ç–∑—ã–≤ (–ø–æ—Å–ª–∞ –∏–∑ —Å—Ç—Ä–∞–Ω—ã)": ["–æ—Ç–∑–´–≤", "–û—Ç–∑—ã–≤"],
    "–æ—Ç–æ–∑–≤–∞—Ç—å": ["–æ—Ç–æ–∑–≤–ê—Ç—å", "–æ—Ç–û–∑–≤–∞—Ç—å"],
    "–æ—Ç—Ä–æ—á–µ—Å—Ç–≤–æ": ["–û—Ç—Ä–æ—á–µ—Å—Ç–≤–æ", "–æ—Ç—Ä–û—á–µ—Å—Ç–≤–æ"],
    "–ø–∞—Ä—Ç–µ—Ä": ["–ø–∞—Ä—Ç–ï—Ä", "–ø–ê—Ä—Ç–µ—Ä"],
    "–ø–æ—Ä—Ç—Ñ–µ–ª—å": ["–ø–æ—Ä—Ç—Ñ–ï–ª—å", "–ø–û—Ä—Ç—Ñ–µ–ª—å"],
    "–ø–æ—Ä—É—á–Ω–∏": ["–ø–û—Ä—É—á–Ω–∏", "–ø–æ—Ä–£—á–Ω–∏"],
    "–ø—Ä–∏–¥–∞–Ω–æ–µ": ["–ø—Ä–∏–¥–ê–Ω–æ–µ", "–ø—Ä–ò–¥–∞–Ω–æ–µ"],
    "–ø—Ä–∏–∑—ã–≤": ["–ø—Ä–∏–∑–´–≤", "–ø—Ä–ò–∑—ã–≤"],
    "—Å–≤–µ–∫–ª–∞": ["—Å–≤–ï–∫–ª–∞", "—Å–≤–µ–∫–ª–ê"],
    "—Å–∏—Ä–æ—Ç—ã": ["—Å–∏—Ä–û—Ç—ã", "—Å–ò—Ä–æ—Ç—ã"],
    "—Å–æ–∑—ã–≤": ["—Å–æ–∑–´–≤", "—Å–û–∑—ã–≤"],
    "—Å–æ—Å—Ä–µ–¥–æ—Ç–æ—á–µ–Ω–∏–µ": ["—Å–æ—Å—Ä–µ–¥–æ—Ç–û—á–µ–Ω–∏–µ", "—Å–æ—Å—Ä–µ–¥–æ—Ç–æ—á–ï–Ω–∏–µ"],
    "—Å—Ä–µ–¥—Å—Ç–≤–∞": ["—Å—Ä–ï–¥—Å—Ç–≤–∞", "—Å—Ä–µ–¥—Å—Ç–≤–ê"],
    "—Å—Ç–∞—Ç—É—è": ["—Å—Ç–ê—Ç—É—è", "—Å—Ç–∞—Ç–£—è"],
    "—Å—Ç–æ–ª—è—Ä": ["—Å—Ç–æ–ª–Ø—Ä", "—Å—Ç–û–ª—è—Ä"],
    "—Ç–∞–º–æ–∂–Ω—è": ["—Ç–∞–º–û–∂–Ω—è", "—Ç–ê–º–æ–∂–Ω—è"],
    "—Ç–æ—Ä—Ç—ã": ["—Ç–û—Ä—Ç—ã", "—Ç–æ—Ä—Ç–´"],
    "—Ç—É—Ñ–ª—è": ["—Ç–£—Ñ–ª—è", "—Ç—É—Ñ–ª–Ø"],
    "—Ü–µ–º–µ–Ω—Ç": ["—Ü–µ–º–ï–Ω—Ç", "—Ü–ï–º–µ–Ω—Ç"],
    "—Ü–µ–Ω—Ç–Ω–µ—Ä": ["—Ü–ï–Ω—Ç–Ω–µ—Ä", "—Ü–µ–Ω—Ç–Ω–ï—Ä"],
    "—Ü–µ–ø–æ—á–∫–∞": ["—Ü–µ–ø–û—á–∫–∞", "—Ü–ï–ø–æ—á–∫–∞"],
    "—à–∞—Ä—Ñ—ã": ["—à–ê—Ä—Ñ—ã", "—à–∞—Ä—Ñ–´"],
    "—à–æ—Ñ–µ—Ä": ["—à–æ—Ñ–ï—Ä", "—à–û—Ñ–µ—Ä"],
    "—ç–∫—Å–ø–µ—Ä—Ç": ["—ç–∫—Å–ø–ï—Ä—Ç", "–≠–∫—Å–ø–µ—Ä—Ç"],
    "–≤–µ—Ä–Ω–∞": ["–≤–µ—Ä–Ω–ê", "–≤–ï—Ä–Ω–∞"],
    "–∑–Ω–∞—á–∏–º—ã–π": ["–∑–Ω–ê—á–∏–º—ã–π", "–∑–Ω–∞—á–ò–º—ã–π"],
    "–∫—Ä–∞—Å–∏–≤–µ–µ": ["–∫—Ä–∞—Å–ò–≤–µ–µ", "–∫—Ä–∞—Å–∏–≤–ï–µ"],
    "–∫—É—Ö–æ–Ω–Ω—ã–π": ["–∫–£—Ö–æ–Ω–Ω—ã–π", "–∫—É—Ö–û–Ω–Ω—ã–π"],
    "–ª–æ–≤–∫–∞": ["–ª–æ–≤–∫–ê", "–ª–û–≤–∫–∞"],
    "–º–æ–∑–∞–∏—á–Ω—ã–π": ["–º–æ–∑–∞–ò—á–Ω—ã–π", "–º–æ–∑–ê–∏—á–Ω—ã–π"],
    "–æ–ø—Ç–æ–≤—ã–π": ["–æ–ø—Ç–û–≤—ã–π", "–û–ø—Ç–æ–≤—ã–π"],
    "–ø—Ä–æ–∑–æ—Ä–ª–∏–≤—ã–π": ["–ø—Ä–æ–∑–æ—Ä–ª–ò–≤—ã–π", "–ø—Ä–æ–∑–û—Ä–ª–∏–≤—ã–π"],
    "—Å–ª–∏–≤–æ–≤—ã–π": ["—Å–ª–ò–≤–æ–≤—ã–π", "—Å–ª–∏–≤–û–≤—ã–π"],
    "–±—Ä–∞–ª–∞": ["–±—Ä–∞–ª–ê", "–±—Ä–ê–ª–∞"],
    "–±—Ä–∞–ª–∞—Å—å": ["–±—Ä–∞–ª–ê—Å—å", "–±—Ä–ê–ª–∞—Å—å"],
    "–≤–∑—è–ª–∞": ["–≤–∑—è–ª–ê", "–≤–∑–Ø–ª–∞"],
    "–≤–∑—è–ª–∞—Å—å": ["–≤–∑—è–ª–ê—Å—å", "–≤–∑–Ø–ª–∞—Å—å"],
    "–≤–ª–∏–ª–∞—Å—å": ["–≤–ª–∏–ª–ê—Å—å", "–≤–ª–ò–ª–∞—Å—å"],
    "–≤–æ—Ä–≤–∞–ª–∞—Å—å": ["–≤–æ—Ä–≤–∞–ª–ê—Å—å", "–≤–æ—Ä–≤–ê–ª–∞—Å—å"],
    "–≤–æ—Å–ø—Ä–∏–Ω—è—Ç—å": ["–≤–æ—Å–ø—Ä–∏–Ω–Ø—Ç—å", "–≤–æ—Å–ø—Ä–ò–Ω—è—Ç—å"],
    "–≤–æ—Å–ø—Ä–∏–Ω—è–ª–∞": ["–≤–æ—Å–ø—Ä–∏–Ω—è–ª–ê", "–≤–æ—Å–ø—Ä–ò–Ω—è–ª–∞"],
    "–≤–æ—Å—Å–æ–∑–¥–∞–ª–∞": ["–≤–æ—Å—Å–æ–∑–¥–∞–ª–ê", "–≤–æ—Å—Å–û–∑–¥–∞–ª–∞"],
    "–≤—Ä—É—á–∏—Ç—å": ["–≤—Ä—É—á–ò—Ç", "–≤—Ä–£—á–∏—Ç—å"],
    "–≥–Ω–∞–ª–∞": ["–≥–Ω–∞–ª–ê", "–≥–Ω–ê–ª–∞"],
    "–≥–Ω–∞–ª–∞—Å—å": ["–≥–Ω–∞–ª–ê—Å—å", "–≥–Ω–ê–ª–∞—Å—å"],
    "–¥–æ–±—Ä–∞–ª–∞": ["–¥–æ–±—Ä–∞–ª–ê", "–¥–æ–±—Ä–ê–ª–∞"],
    "–¥–æ–±—Ä–∞–ª–∞—Å—å": ["–¥–æ–±—Ä–∞–ª–ê—Å—å", "–¥–æ–±—Ä–ê–ª–∞—Å—å"],
    "–¥–æ–∂–¥–∞–ª–∞—Å—å": ["–¥–æ–∂–¥–∞–ª–ê—Å—å", "–¥–æ–∂–¥–ê–ª–∞—Å—å"],
    "–¥–æ–∑–≤–æ–Ω–∏—Ç—Å—è": ["–¥–æ–∑–≤–æ–Ω–ò—Ç—Å—è", "–¥–û–∑–≤–æ–Ω–∏—Ç—Å—è"],
    "–¥–æ–∑–∏—Ä–æ–≤–∞—Ç—å": ["–¥–æ–∑–ò—Ä–æ–≤–∞—Ç—å", "–¥–æ–∑–∏—Ä–û–≤–∞—Ç—å"],
    "–∂–¥–∞–ª–∞": ["–∂–¥–∞–ª–ê", "–∂–¥–ê–ª–∞"],
    "–∂–∏–ª–æ—Å—å": ["–∂–∏–ª–û—Å—å", "–∂–ò–ª–æ—Å—å"],
    "–∑–∞–∫—É–ø–æ—Ä–∏—Ç—å": ["–∑–∞–∫–£–ø–æ—Ä–∏—Ç—å", "–∑–∞–∫—É–ø–û—Ä–∏—Ç—å"],
    "–∑–∞–Ω—è—Ç—å": ["–∑–∞–Ω–Ø—Ç—å", "–∑–ê–Ω—è—Ç—å"],
    "–∑–∞–Ω—è–ª": ["–∑–ê–Ω—è–ª", "–∑–∞–Ω–Ø–ª"],
    "–∑–∞–Ω—è–ª–∞": ["–∑–∞–Ω—è–ª–ê", "–∑–∞–Ω–Ø–ª–∞"],
    "–∑–∞–Ω—è–ª–∏": ["–∑–ê–Ω—è–ª–∏", "–∑–∞–Ω–Ø–ª–∏"],
    "–∑–∞–ø–µ—Ä–ª–∞": ["–∑–∞–ø–µ—Ä–ª–ê", "–∑–ê–ø–µ—Ä–ª–∞"],
    "–∑–∞–ø–ª–æ–º–±–∏—Ä–æ–≤–∞—Ç—å": ["–∑–∞–ø–ª–æ–º–±–∏—Ä–æ–≤–ê—Ç—å", "–∑–∞–ø–ª–æ–º–±–ò—Ä–æ–≤–∞—Ç—å"],
    "–∑–∞—â–µ–º–∏—Ç": ["–∑–∞—â–µ–º–ò—Ç", "–∑–∞—â–ï–º–∏—Ç"],
    "–∑–≤–∞–ª–∞": ["–∑–≤–∞–ª–ê", "–∑–≤–ê–ª–∞"],
    "–∑–≤–æ–Ω–∏—Ç": ["–∑–≤–æ–Ω–ò—Ç", "–∑–≤–û–Ω–∏—Ç"],
    "–∫–∞—à–ª—è–Ω—É—Ç—å": ["–∫–ê—à–ª—è–Ω—É—Ç—å", "–∫–∞—à–ª—è–Ω–£—Ç—å"],
    "–∫–ª–∞–ª–∞": ["–∫–ª–ê–ª–∞", "–∫–ª–∞–ª–ê"],
    "–∫–ª–µ–∏—Ç—å": ["–∫–ª–ï–∏—Ç—å", "–∫–ª–µ–ò—Ç—å"],
    "–∫—Ä–∞–ª–∞—Å—å": ["–∫—Ä–ê–ª–∞—Å—å", "–∫—Ä–∞–ª–ê—Å—å"],
    "–∫—Ä–æ–≤–æ—Ç–æ—á–∏—Ç—å": ["–∫—Ä–æ–≤–æ—Ç–æ—á–ò—Ç—å", "–∫—Ä–æ–≤–æ—Ç–û—á–∏—Ç—å"],
    "–ª–≥–∞–ª–∞": ["–ª–≥–∞–ª–ê", "–ª–≥–ê–ª–∞"],
    "–ª–∏–ª–∞": ["–ª–∏–ª–ê", "–ª–ò–ª–∞"],
    "–ª–∏–ª–∞—Å—å": ["–ª–∏–ª–ê—Å—å", "–ª–ò–ª–∞—Å—å"],
    "–Ω–∞–≤—Ä–∞–ª–∞": ["–Ω–∞–≤—Ä–∞–ª–ê", "–Ω–∞–≤—Ä–ê–ª–∞"],
    "–Ω–∞–¥–µ–ª–∏—Ç": ["–Ω–∞–¥–µ–ª–ò—Ç", "–Ω–∞–¥–ï–ª–∏—Ç"],
    "–Ω–∞–¥–æ—Ä–≤–∞–ª–∞—Å—å": ["–Ω–∞–¥–æ—Ä–≤–∞–ª–ê—Å—å", "–Ω–∞–¥–æ—Ä–≤–ê–ª–∞—Å—å"],
    "–Ω–∞–∑–≤–∞–ª–∞—Å—å": ["–Ω–∞–∑–≤–∞–ª–ê—Å—å", "–Ω–ê–∑–≤–∞–ª–∞—Å—å"],
    "–Ω–∞–∫—Ä–µ–Ω–∏—Ç—Å—è": ["–Ω–∞–∫—Ä–µ–Ω–ò—Ç—Å—è", "–Ω–∞–∫—Ä–ï–Ω–∏—Ç—Å—è"],
    "–Ω–∞–ª–∏–ª–∞": ["–Ω–∞–ª–∏–ª–ê", "–Ω–∞–ª–ò–ª–∞"],
    "–Ω–∞—Ä–≤–∞–ª–∞": ["–Ω–∞—Ä–≤–∞–ª–ê", "–Ω–∞—Ä–≤–ê–ª–∞"],
    "–Ω–∞—á–∞—Ç—å": ["–Ω–∞—á–ê—Ç—å", "–Ω–ê—á–∞—Ç—å"],
    "–Ω–∞—á–∞–ª": ["–Ω–ê—á–∞–ª", "–Ω–∞—á–ê–ª"],
    "–Ω–∞—á–∞–ª–∞": ["–Ω–∞—á–∞–ª–ê", "–Ω–ê—á–∞–ª–∞"],
    "–Ω–∞—á–∞–ª–∏": ["–Ω–ê—á–∞–ª–∏", "–Ω–∞—á–ê–ª–∏"],
    "–æ–±–∑–≤–æ–Ω–∏—Ç": ["–æ–±–∑–≤–æ–Ω–ò—Ç", "–æ–±–∑–≤–û–Ω–∏—Ç"],
    "–æ–±–ª–µ–≥—á–∏—Ç—å": ["–æ–±–ª–µ–≥—á–ò—Ç—å", "–æ–±–ª–ï–≥—á–∏—Ç—å"],
    "–æ–±–ª–∏–ª–∞—Å—å": ["–æ–±–ª–∏–ª–ê—Å—å", "–æ–±–ª–ò–ª–∞—Å—å"],
    "–æ–±–Ω—è–ª–∞—Å—å": ["–æ–±–Ω—è–ª–ê—Å—å", "–æ–±–Ω–Ø–ª–∞—Å—å"],
    "–æ–±–æ–≥–Ω–∞–ª–∞": ["–æ–±–æ–≥–Ω–∞–ª–ê", "–æ–±–æ–≥–Ω–ê–ª–∞"],
    "–æ–±–æ–¥—Ä–∞–ª–∞": ["–æ–±–æ–¥—Ä–∞–ª–ê", "–æ–±–æ–¥—Ä–ê–ª–∞"],
    "–æ–±–æ–¥—Ä–∏—Ç—å": ["–æ–±–æ–¥—Ä–ò—Ç—å", "–æ–±–û–¥—Ä–∏—Ç—å"],
    "–æ–±–æ–¥—Ä–∏—Ç—å—Å—è": ["–æ–±–æ–¥—Ä–ò—Ç—å—Å—è", "–æ–±–û–¥—Ä–∏—Ç—å—Å—è"],
    "–æ–±–æ—Å—Ç—Ä–∏—Ç—å": ["–æ–±–æ—Å—Ç—Ä–ò—Ç—å", "–æ–±–û—Å—Ç—Ä–∏—Ç—å"],
    "–æ–¥–æ–ª–∂–∏—Ç—å": ["–æ–¥–æ–ª–∂–ò—Ç—å", "–æ–¥–û–ª–∂–∏—Ç—å"],
    "–æ–∑–ª–æ–±–∏—Ç—å": ["–æ–∑–ª–û–±–∏—Ç—å", "–æ–∑–ª–æ–±–ò—Ç—å"],
    "–æ–∫–ª–µ–∏—Ç—å": ["–æ–∫–ª–ï–∏—Ç—å", "–æ–∫–ª–µ–ò—Ç—å"],
    "–æ–∫—Ä—É–∂–∏—Ç—å": ["–æ–∫—Ä—É–∂–ò—Ç", "–æ–∫—Ä–£–∂–∏—Ç—å"],
    "–æ–ø–æ—à–ª–∏—Ç—å": ["–æ–ø–û—à–ª–∏—Ç—å", "–æ–ø–æ—à–ª–ò—Ç—å"],
    "–æ—Å–≤–µ–¥–æ–º–∏—Ç—å—Å—è": ["–æ—Å–≤–ï–¥–æ–º–∏—Ç—å—Å—è", "–æ—Å–≤–µ–¥–æ–º–ò—Ç—å—Å—è"],
    "–æ—Ç–±—ã–ª–∞": ["–æ—Ç–±—ã–ª–ê", "–æ—Ç–±–´–ª–∞"],
    "–æ—Ç–¥–∞–ª–∞": ["–æ—Ç–¥–∞–ª–ê", "–æ—Ç–¥–ê–ª–∞"],
    "–æ—Ç–∫—É–ø–æ—Ä–∏—Ç—å": ["–æ—Ç–∫–£–ø–æ—Ä–∏—Ç—å", "–æ—Ç–∫—É–ø–û—Ä–∏—Ç—å"],
    "–æ—Ç–æ–∑–≤–∞–ª–∞": ["–æ—Ç–æ–∑–≤–∞–ª–ê", "–æ—Ç–æ–∑–≤–ê–ª–∞"],
    "–æ—Ç–æ–∑–≤–∞–ª–∞—Å—å": ["–æ—Ç–æ–∑–≤–∞–ª–ê—Å—å", "–æ—Ç–æ–∑–≤–ê–ª–∞—Å—å"],
    "–ø–µ—Ä–µ–∑–≤–æ–Ω–∏—Ç": ["–ø–µ—Ä–µ–∑–≤–æ–Ω–ò—Ç", "–ø–µ—Ä–µ–∑–≤–û–Ω–∏—Ç"],
    "–ø–µ—Ä–µ–ª–∏–ª–∞": ["–ø–µ—Ä–µ–ª–∏–ª–ê", "–ø–µ—Ä–µ–ª–ò–ª–∞"],
    "–ø–ª–æ–¥–æ–Ω–æ—Å–∏—Ç—å": ["–ø–ª–æ–¥–æ–Ω–æ—Å–ò—Ç—å", "–ø–ª–æ–¥–æ–Ω–û—Å–∏—Ç—å"],
    "–ø–ª–æ–º–±–∏—Ä–æ–≤–∞—Ç—å": ["–ø–ª–æ–º–±–∏—Ä–æ–≤–ê—Ç—å", "–ø–ª–æ–º–±–ò—Ä–æ–≤–∞—Ç—å"],
    "–ø–æ–≤—Ç–æ—Ä–∏—Ç": ["–ø–æ–≤—Ç–æ—Ä–ò—Ç", "–ø–æ–≤—Ç–û—Ä–∏—Ç"],
    "–ø–æ–∑–≤–∞–ª–∞": ["–ø–æ–∑–≤–∞–ª–ê", "–ø–æ–∑–≤–ê–ª–∞"],
    "–ø–æ–∑–≤–æ–Ω–∏—Ç": ["–ø–æ–∑–≤–æ–Ω–ò—Ç", "–ø–æ–∑–≤–û–Ω–∏—Ç"],
    "–ø–æ–ª–∏–ª–∞": ["–ø–æ–ª–∏–ª–ê", "–ø–æ–ª–ò–ª–∞"],
    "–ø–æ–ª–æ–∂–∏—Ç—å": ["–ø–æ–ª–æ–∂–ò—Ç—å", "–ø–æ–ª–û–∂–∏—Ç—å"],
    "–ø–æ–Ω—è—Ç—å": ["–ø–æ–Ω–Ø—Ç—å", "–ø–û–Ω—è—Ç—å"],
    "–ø–æ–Ω—è–ª–∞": ["–ø–æ–Ω—è–ª–ê", "–ø–û–Ω—è–ª–∞"],
    "–ø–æ—Å–ª–∞–ª–∞": ["–ø–æ—Å–ª–ê–ª–∞", "–ø–æ—Å–ª–∞–ª–ê"],
    "–ø—Ä–∏–±—ã—Ç—å": ["–ø—Ä–∏–±–´—Ç—å", "–ø—Ä–∏–±–´—Ç—å"],
    "–ø—Ä–∏–±—ã–ª": ["–ø—Ä–ò–±—ã–ª", "–ø—Ä–∏–±–´–ª"],
    "–ø—Ä–∏–±—ã–ª–∞": ["–ø—Ä–∏–±—ã–ª–ê", "–ø—Ä–ò–±—ã–ª–∞"],
    "–ø—Ä–∏–±—ã–ª–∏": ["–ø—Ä–ò–±—ã–ª–∏", "–ø—Ä–∏–±–´–ª–∏"],
    "–ø—Ä–∏–Ω—è—Ç—å": ["–ø—Ä–∏–Ω–Ø—Ç—å", "–ø—Ä–ò–Ω—è—Ç—å"],
    "–ø—Ä–∏–Ω—è–ª": ["–ø—Ä–ò–Ω—è–ª", "–ø—Ä–∏–Ω–Ø–ª"],
    "–ø—Ä–∏–Ω—è–ª–∞": ["–ø—Ä–∏–Ω—è–ª–ê", "–ø—Ä–ò–Ω—è–ª–∞"],
    "–ø—Ä–∏–Ω—è–ª–∏": ["–ø—Ä–ò–Ω—è–ª–∏", "–ø—Ä–∏–Ω–Ø–ª–∏"],
    "—Ä–≤–∞–ª–∞": ["—Ä–≤–∞–ª–ê", "—Ä–≤–ê–ª–∞"],
    "—Å–≤–µ—Ä–ª–∏—Ç": ["—Å–≤–µ—Ä–ª–ò—Ç", "—Å–≤–ï—Ä–ª–∏—Ç"],
    "—Å–Ω—è–ª–∞": ["—Å–Ω—è–ª–ê", "—Å–Ω–Ø–ª–∞"],
    "—Å–æ–≤—Ä–∞–ª–∞": ["—Å–æ–≤—Ä–∞–ª–ê", "—Å–æ–≤—Ä–ê–ª–∞"],
    "—Å–æ–∑–¥–∞–ª–∞": ["—Å–æ–∑–¥–∞–ª–ê", "—Å–æ–∑–¥–ê–ª–∞"],
    "—Å–æ—Ä–≤–∞–ª–∞": ["—Å–æ—Ä–≤–∞–ª–ê", "—Å–æ—Ä–≤–ê–ª–∞"],
    "—Å–æ—Ä–∏—Ç": ["—Å–æ—Ä–ò—Ç", "—Å–û—Ä–∏—Ç"],
    "—É–±—Ä–∞–ª–∞": ["—É–±—Ä–∞–ª–ê", "—É–±—Ä–ê–ª–∞"],
    "—É–≥–ª—É–±–∏—Ç—å": ["—É–≥–ª—É–±–ò—Ç—å", "—É–≥–ª–£–±–∏—Ç—å"],
    "—É–∫—Ä–µ–ø–∏—Ç": ["—É–∫—Ä–µ–ø–ò—Ç", "—É–∫—Ä–ï–ø–∏—Ç"],
    "—á–µ—Ä–ø–∞—Ç—å": ["—á–ï—Ä–ø–∞—Ç—å", "—á–µ—Ä–ø–ê—Ç—å"],
    "—â–µ–º–∏—Ç": ["—â–µ–º–ò—Ç", "—â–ï–º–∏—Ç"],
    "—â–µ–ª–∫–∞—Ç—å": ["—â–ï–ª–∫–∞—Ç—å", "—â–µ–ª–∫–ê—Ç—å"],
    "–¥–æ–≤–µ–∑–µ–Ω–Ω—ã–π": ["–¥–æ–≤–µ–∑–ï–Ω–Ω—ã–π", "–¥–û–≤–µ–∑–µ–Ω–Ω—ã–π"],
    "–∑–∞–≥–Ω—É—Ç—ã–π": ["–∑–ê–≥–Ω—É—Ç—ã–π", "–∑–∞–≥–Ω–£—Ç—ã–π"],
    "–∑–∞–Ω—è—Ç—ã–π": ["–∑–ê–Ω—è—Ç—ã–π", "–∑–∞–Ω–Ø—Ç—ã–π"],
    "–∑–∞–Ω—è—Ç–∞": ["–∑–∞–Ω—è—Ç–ê", "–∑–ê–Ω—è—Ç–∞"],
    "–∑–∞–ø–µ—Ä—Ç—ã": ["–∑–ê–ø–µ—Ä—Ç—ã", "–∑–∞–ø–ï—Ä—Ç—ã"],
    "–∑–∞—Å–µ–ª–µ–Ω–Ω—ã–π": ["–∑–∞—Å–µ–ª–ï–Ω–Ω—ã–π", "–∑–∞—Å–ï–ª–µ–Ω–Ω—ã–π"],
    "–∑–∞—Å–µ–ª–µ–Ω–∞": ["–∑–∞—Å–µ–ª–µ–Ω–ê", "–∑–∞—Å–ï–ª–µ–Ω–∞"],
    "–∫–æ—Ä–º—è—â–∏–π": ["–∫–æ—Ä–º–Ø—â–∏–π", "–∫–û—Ä–º—è—â–∏–π"],
    "–∫—Ä–æ–≤–æ—Ç–æ—á–∞—â–∏–π": ["–∫—Ä–æ–≤–æ—Ç–æ—á–ê—â–∏–π", "–∫—Ä–æ–≤–æ—Ç–û—á–∞—â–∏–π"],
    "–Ω–∞–∂–∏–≤—à–∏–π": ["–Ω–∞–∂–ò–≤—à–∏–π", "–Ω–ê–∂–∏–≤—à–∏–π"],
    "–Ω–∞–ª–∏–≤—à–∏–π": ["–Ω–∞–ª–ò–≤—à–∏–π", "–Ω–ê–ª–∏–≤—à–∏–π"],
    "–Ω–∞–Ω—è–≤—à–∏–π—Å—è": ["–Ω–∞–Ω–Ø–≤—à–∏–π—Å—è", "–Ω–ê–Ω—è–≤—à–∏–π—Å—è"],
    "–Ω–∞—á–∞–≤—à–∏–π": ["–Ω–∞—á–ê–≤—à–∏–π", "–Ω–ê—á–∞–≤—à–∏–π"],
    "–Ω–∞—á–∞—Ç—ã–π": ["–Ω–ê—á–∞—Ç—ã–π", "–Ω–∞—á–ê—Ç—ã–π"],
    "–Ω–∏–∑–≤–µ–¥–µ–Ω–Ω—ã–π": ["–Ω–∏–∑–≤–µ–¥–ï–Ω–Ω—ã–π", "–Ω–ò–∑–≤–µ–¥–µ–Ω–Ω—ã–π"],
    "–æ–±–ª–µ–≥—á–µ–Ω–Ω—ã–π": ["–æ–±–ª–µ–≥—á–ï–Ω–Ω—ã–π", "–æ–±–ª–ï–≥—á–µ–Ω–Ω—ã–π"],
    "–æ–±–æ–¥—Ä–µ–Ω–Ω—ã–π": ["–æ–±–æ–¥—Ä–ï–Ω–Ω—ã–π", "–æ–±–û–¥—Ä–µ–Ω–Ω—ã–π"],
    "–æ–±–æ—Å—Ç—Ä–µ–Ω–Ω—ã–π": ["–æ–±–æ—Å—Ç—Ä–ï–Ω–Ω—ã–π", "–æ–±–û—Å—Ç—Ä–µ–Ω–Ω—ã–π"],
    "–æ—Ç–∫–ª—é—á–µ–Ω–Ω—ã–π": ["–æ—Ç–∫–ª—é—á–ï–Ω–Ω—ã–π", "–æ—Ç–∫–ª–Æ—á–µ–Ω–Ω—ã–π"],
    "–ø–æ–≤—Ç–æ—Ä–µ–Ω–Ω—ã–π": ["–ø–æ–≤—Ç–æ—Ä–ï–Ω–Ω—ã–π", "–ø–æ–≤—Ç–û—Ä–µ–Ω–Ω—ã–π"],
    "–ø–æ–¥–µ–ª–µ–Ω–Ω—ã–π": ["–ø–æ–¥–µ–ª–ï–Ω–Ω—ã–π", "–ø–æ–¥–ï–ª–µ–Ω–Ω—ã–π"],
    "–ø–æ–Ω—è–≤—à–∏–π": ["–ø–æ–Ω–Ø–≤—à–∏–π", "–ø–û–Ω—è–≤—à–∏–π"],
    "–ø—Ä–∏–Ω—è—Ç—ã–π": ["–ø—Ä–ò–Ω—è—Ç—ã–π", "–ø—Ä–∏–Ω–Ø—Ç—ã–π"],
    "–ø—Ä–∏–Ω—è—Ç–∞": ["–ø—Ä–∏–Ω—è—Ç–ê", "–ø—Ä–ò–Ω—è—Ç–∞"],
    "–ø—Ä–∏—Ä—É—á–µ–Ω–Ω—ã–π": ["–ø—Ä–∏—Ä—É—á–ï–Ω–Ω—ã–π", "–ø—Ä–∏—Ä–£—á–µ–Ω–Ω—ã–π"],
    "–ø—Ä–æ–∂–∏–≤—à–∏–π": ["–ø—Ä–æ–∂–ò–≤—à–∏–π", "–ø—Ä–û–∂–∏–≤—à–∏–π"],
    "—Å–Ω—è—Ç–∞": ["—Å–Ω—è—Ç–ê", "—Å–Ω–Ø—Ç–∞"],
    "—Å–æ–≥–Ω—É—Ç—ã–π": ["—Å–û–≥–Ω—É—Ç—ã–π", "—Å–æ–≥–Ω–£—Ç—ã–π"],
    "—É–≥–ª—É–±–ª–µ–Ω–Ω—ã–π": ["—É–≥–ª—É–±–ª–ï–Ω–Ω—ã–π", "—É–≥–ª–£–±–ª–µ–Ω–Ω—ã–π"],
    "–∑–∞–∫—É–ø–æ—Ä–∏–≤": ["–∑–∞–∫–£–ø–æ—Ä–∏–≤", "–∑–∞–∫—É–ø–û—Ä–∏–≤"],
    "–Ω–∞—á–∞–≤": ["–Ω–∞—á–ê–≤", "–Ω–ê—á–∞–≤"],
    "–Ω–∞—á–∞–≤—à–∏—Å—å": ["–Ω–∞—á–ê–≤—à–∏—Å—å", "–Ω–ê—á–∞–≤—à–∏—Å—å"],
    "–æ—Ç–¥–∞–≤": ["–æ—Ç–¥–ê–≤", "–û—Ç–¥–∞–≤"],
    "–ø–æ–¥–Ω—è–≤": ["–ø–æ–¥–Ω–Ø–≤", "–ø–û–¥–Ω—è–≤"],
    "–ø–æ–Ω—è–≤": ["–ø–æ–Ω–Ø–≤", "–ø–û–Ω—è–≤"],
    "–ø—Ä–∏–±—ã–≤": ["–ø—Ä–∏–±–´–≤", "–ø—Ä–ò–±—ã–≤"],
    "—Å–æ–∑–¥–∞–≤": ["—Å–æ–∑–¥–ê–≤", "—Å–û–∑–¥–∞–≤"],
    "–≤–æ–≤—Ä–µ–º—è": ["–≤–û–≤—Ä–µ–º—è", "–≤–æ–≤—Ä–ï–º—è"],
    "–¥–æ–≤–µ—Ä—Ö—É": ["–¥–û–≤–µ—Ä—Ö—É", "–¥–æ–≤–ï—Ä—Ö—É"],
    "–¥–æ–Ω–µ–ª—å–∑—è": ["–¥–æ–Ω–ï–ª—å–∑—è", "–¥–û–Ω–µ–ª—å–∑—è"],
    "–¥–æ–Ω–∏–∑—É": ["–¥–û–Ω–∏–∑—É", "–¥–æ–Ω–ò–∑—É"],
    "–¥–æ—Å—É—Ö–∞": ["–¥–û—Å—É—Ö–∞", "–¥–æ—Å–£—Ö–∞"],
    "–∑–∞—Å–≤–µ—Ç–ª–æ": ["–∑–ê—Å–≤–µ—Ç–ª–æ", "–∑–∞—Å–≤–ï—Ç–ª–æ"],
    "–∑–∞—Ç–µ–º–Ω–æ": ["–∑–ê—Ç–µ–º–Ω–æ", "–∑–∞—Ç–ï–º–Ω–æ"],
    "–Ω–∞–¥–æ–ª–≥–æ": ["–Ω–∞–¥–û–ª–≥–æ", "–Ω–ê–¥–æ–ª–≥–æ"],
    "–Ω–µ–Ω–∞–¥–æ–ª–≥–æ": ["–Ω–µ–Ω–∞–¥–û–ª–≥–æ", "–Ω–µ–Ω–ê–¥–æ–ª–≥–æ"]
}


# –•—Ä–∞–Ω–∏–ª–∏—â–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
user_data = {}

# –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –¥–ª—è –≥–ª–∞–≤–Ω–æ–≥–æ –º–µ–Ω—é
main_menu_keyboard = [
    [{"text": "–¢—Ä–µ–Ω–∏—Ä–æ–≤–∞—Ç—å"}, {"text": "–û—à–∏–±–∫–∏"}]  # –£–∂–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ: —Å–ø–∏—Å–æ–∫ —Å–ø–∏—Å–∫–æ–≤
]

# –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –¥–ª—è –º–µ–Ω—é –æ—à–∏–±–æ–∫
errors_menu_keyboard = [
    [{"text": "–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é"}, {"text": "–¢—Ä–µ–Ω–∏—Ä–æ–≤–∞—Ç—å –æ—à–∏–±–∫–∏"}]  # –£–∂–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
]

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
application = Application.builder().token(TOKEN).build()

# –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –∏ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
async def send_welcome(update: Update, context: ContextTypes.DEFAULT_TYPE) -> None:
    user_id = update.effective_chat.id
    print(f"send_welcome: User {user_id} started bot")
    await update.message.reply_text(
        "–ü—Ä–∏–≤–µ—Ç! –Ø –ø–æ–º–æ–≥—É —Ç–µ–±–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∞—Ç—å —É–¥–∞—Ä–µ–Ω–∏—è. –í—ã–±–µ—Ä–∏ –¥–µ–π—Å—Ç–≤–∏–µ:",
        reply_markup={"keyboard": main_menu_keyboard, "resize_keyboard": True, "one_time_keyboard": True}
    )
    user_data[user_id] = {'errors': [], 'training_mode': None, 'current_word': None, 'correct_option': None}
    print(f"User {user_id} initialized with data: {user_data[user_id]}")

# –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
async def handle_message(update: Update, context: ContextTypes.DEFAULT_TYPE) -> None:
    user_id = update.effective_chat.id
    text = update.message.text.strip()
    print(f"handle_message: Received '{text}' from user {user_id}")

    if text == "–¢—Ä–µ–Ω–∏—Ä–æ–≤–∞—Ç—å":
        print(f"Matched '–¢—Ä–µ–Ω–∏—Ä–æ–≤–∞—Ç—å' for user {user_id}")
        await start_training(update, context, use_errors=False)
    elif text == "–û—à–∏–±–∫–∏":
        print(f"Matched '–û—à–∏–±–∫–∏' for user {user_id}")
        await show_errors_menu(update, context)
    elif text == "–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é":
        print(f"Matched '–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é' for user {user_id}")
        await send_main_menu(update, context)
    elif text == "–¢—Ä–µ–Ω–∏—Ä–æ–≤–∞—Ç—å –æ—à–∏–±–∫–∏":
        print(f"Matched '–¢—Ä–µ–Ω–∏—Ä–æ–≤–∞—Ç—å –æ—à–∏–±–∫–∏' for user {user_id}")
        await start_training(update, context, use_errors=True)
    elif user_id in user_data and user_data[user_id]['training_mode'] is not None:
        print(f"Checking answer for user {user_id}")
        await check_answer(update, context)
    else:
        print(f"No match for '{text}', showing main menu for user {user_id}")
        await update.message.reply_text(
            "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∏—Å–ø–æ–ª—å–∑—É–π –∫–Ω–æ–ø–∫–∏ –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏.",
            reply_markup={"keyboard": main_menu_keyboard, "resize_keyboard": True}
        )

# –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –≥–ª–∞–≤–Ω–æ–≥–æ –º–µ–Ω—é
async def send_main_menu(update: Update, context: ContextTypes.DEFAULT_TYPE) -> None:
    user_id = update.effective_chat.id
    print(f"send_main_menu: Returning user {user_id} to main menu")
    await update.message.reply_text(
        "–í—ã–±–µ—Ä–∏ –¥–µ–π—Å—Ç–≤–∏–µ:",
        reply_markup={"keyboard": main_menu_keyboard, "resize_keyboard": True, "one_time_keyboard": True}
    )
    user_data[user_id]['training_mode'] = None

# –§—É–Ω–∫—Ü–∏—è –¥–ª—è –Ω–∞—á–∞–ª–∞ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏
async def start_training(update: Update, context: ContextTypes.DEFAULT_TYPE, use_errors=False) -> None:
    user_id = update.effective_chat.id
    print(f"start_training: Starting for user {user_id}, use_errors={use_errors}")

    if user_id not in user_data:
        print(f"User {user_id} not in user_data, initializing")
        user_data[user_id] = {'errors': [], 'training_mode': None, 'current_word': None, 'correct_option': None}

    if use_errors and not user_data[user_id]['errors']:
        print(f"No errors found for user {user_id}")
        await update.message.reply_text(
            "–£ —Ç–µ–±—è –ø–æ–∫–∞ –Ω–µ—Ç –æ—à–∏–±–æ–∫ –¥–ª—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏.",
            reply_markup={"keyboard": main_menu_keyboard, "resize_keyboard": True}
        )
        return

    user_data[user_id]['training_mode'] = 'errors' if use_errors else 'all'
    print(f"Training mode set to '{user_data[user_id]['training_mode']}' for user {user_id}")
    await send_question(update, context)

# –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤–æ–ø—Ä–æ—Å–∞
async def send_question(update: Update, context: ContextTypes.DEFAULT_TYPE) -> None:
    user_id = update.effective_chat.id
    print(f"send_question: Preparing question for user {user_id}, mode={user_data[user_id]['training_mode']}")

    if user_data[user_id]['training_mode'] == 'errors':
        current_words = {word: words[word] for word in user_data[user_id]['errors']}
        print(f"Errors mode, words: {list(current_words.keys())}")
    else:
        current_words = words
        print(f"All mode, words sample: {list(current_words.keys())[:5]}")

    if not current_words:
        print(f"No words available for user {user_id}")
        await update.message.reply_text(
            "–°–ø–∏—Å–æ–∫ —Å–ª–æ–≤ –ø—É—Å—Ç. –ü—Ä–æ–≤–µ—Ä—å –º–∞—Å—Å–∏–≤ words –∏ –ø–æ–ø—Ä–æ–±—É–π —Å–Ω–æ–≤–∞ —Å /start.",
            reply_markup={"keyboard": main_menu_keyboard, "resize_keyboard": True}
        )
        user_data[user_id]['training_mode'] = None
        return

    word, options = random.choice(list(current_words.items()))
    correct_option = options[0]  # –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç ‚Äî –ø–µ—Ä–≤—ã–π
    random.shuffle(options)
    print(f"Chosen word: {word}, options: {options}, correct: {correct_option}")

    user_data[user_id]['current_word'] = word
    user_data[user_id]['correct_option'] = correct_option

    # –ò—Å–ø—Ä–∞–≤–ª—è–µ–º —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
    keyboard = [[{"text": option}] for option in options]  # –ö–∞–∂–¥—ã–π –≤–∞—Ä–∏–∞–Ω—Ç –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–π —Å—Ç—Ä–æ–∫–µ
    keyboard.append([{"text": "–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é"}])  # –î–æ–±–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É "–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é" –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω—É—é —Å—Ç—Ä–æ–∫—É
    markup = {
        "keyboard": keyboard,
        "resize_keyboard": True,
        "one_time_keyboard": True
    }
    print(f"Sending question to user {user_id} with keyboard: {keyboard}")
    await update.message.reply_text(
        f"–í—ã–±–µ—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ —É–¥–∞—Ä–µ–Ω–∏–µ: {word}",
        reply_markup=markup
    )

# –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –æ—Ç–≤–µ—Ç–∞
async def check_answer(update: Update, context: ContextTypes.DEFAULT_TYPE) -> None:
    user_id = update.effective_chat.id
    text = update.message.text.strip()
    print(f"check_answer: Received '{text}' from user {user_id}")

    if text == "–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é":
        await send_main_menu(update, context)
        return

    if user_id not in user_data or 'correct_option' not in user_data[user_id]:
        print(f"Data missing for user {user_id}")
        await update.message.reply_text("–î–∞–Ω–Ω—ã–µ –ø–æ—Ç–µ—Ä—è–Ω—ã. –ù–∞—á–Ω–∏ –∑–∞–Ω–æ–≤–æ —Å /start.")
        return

    correct_option = user_data[user_id]['correct_option']
    word = user_data[user_id]['current_word']
    training_mode = user_data[user_id]['training_mode']

    if text == correct_option:
        print(f"Correct answer for user {user_id}: {correct_option}")
        await update.message.reply_text(f"‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ! {correct_option}")
        if training_mode == 'errors' and word in user_data[user_id]['errors']:
            user_data[user_id]['errors'].remove(word)
            print(f"Removed {word} from errors for user {user_id}")
            if not user_data[user_id]['errors']:
                await update.message.reply_text(
                    "üéâ –í—Å–µ –æ—à–∏–±–∫–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã!",
                    reply_markup={"keyboard": main_menu_keyboard, "resize_keyboard": True}
                )
                user_data[user_id]['training_mode'] = None
                return
    else:
        print(f"Wrong answer for user {user_id}: {text}, correct: {correct_option}")
        await update.message.reply_text(f"‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ. –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç: {correct_option}")
        if training_mode == 'all' and word not in user_data[user_id]['errors']:
            user_data[user_id]['errors'].append(word)
            print(f"Added {word} to errors for user {user_id}")

    await send_question(update, context)

# –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–∫–∞–∑–∞ –º–µ–Ω—é –æ—à–∏–±–æ–∫
async def show_errors_menu(update: Update, context: ContextTypes.DEFAULT_TYPE) -> None:
    user_id = update.effective_chat.id
    print(f"show_errors_menu: Showing errors for user {user_id}")
    errors = user_data[user_id]['errors']
    if not errors:
        await update.message.reply_text(
            "–£ —Ç–µ–±—è –ø–æ–∫–∞ –Ω–µ—Ç –æ—à–∏–±–æ–∫.",
            reply_markup={"keyboard": main_menu_keyboard, "resize_keyboard": True}
        )
    else:
        errors_list = "\n".join(errors)
        await update.message.reply_text(
            f"–¢–≤–æ–∏ –æ—à–∏–±–∫–∏:\n{errors_list}\n\n–í—ã–±–µ—Ä–∏ –¥–µ–π—Å—Ç–≤–∏–µ:",
            reply_markup={"keyboard": errors_menu_keyboard, "resize_keyboard": True}
        )

# –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
application.add_handler(CommandHandler("start", send_welcome))
application.add_handler(MessageHandler(filters.TEXT & ~filters.COMMAND, handle_message))

# –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
def main():
    print("Starting bot polling...")
    application.run_polling(allowed_updates=Update.ALL_TYPES)

if __name__ == "__main__":
    main()
